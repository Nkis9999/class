<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
	rel="stylesheet">
</head>
<body>
	<div th:replace="~{layout/header::header}"></div>
	<div class="container mt-4">
	    <div class="d-flex justify-content-between align-items-center mb-3">
	        <h3 class="m-0">書籍列表</h3>
	        <a th:href="@{/addBook}" class="btn btn-primary"> 新增書籍 </a>
	    </div>
	    <!-- 搜尋 -->
	    <form th:action="@{/books}" method="get" class="mb-3">
	        <div class="input-group">
	            <input type="text" name="keyword" id="keyword" class="form-control"
	                   placeholder="請輸入關鍵字搜尋書名或作者…"
	                   th:value="${keyword}">
	            <button type="submit" class="btn btn-outline-secondary">搜尋</button>
	        </div>
	    </form>
	
	    <!-- 表格 -->
	    <table class="table table-striped table-bordered">
	        <thead class="table-dark">
	            <tr>
		            <th style="width: 35%;">書名</th>
		            <th style="width: 25%;">作者</th>
		            <th style="width: 20%;">購買日</th>
		            <th style="width: 20%;">功能</th>
	            </tr>
	        </thead>
	        <tbody>
	            <tr th:each="book : ${bookPage.content}">
	                <td th:text="${book.name}">迷霧之子</td>
	                <td th:text="${book.author}">布蘭登山德森</td>
	                <td th:text="${book.buyDate}">2025-01-01</td>
	                <td>
	                    <a th:href="@{/toEditPage/{id}(id=${book.id})}" class="btn btn-primary btn-sm">編輯</a>
	                    <a th:href="@{/delete/{id}(id=${book.id})}" class="btn btn-danger btn-sm">刪除</a>
	                </td>
	            </tr>
	        </tbody>
	    </table>
	
	    <!-- 分頁 -->
	    <nav th:if="${bookPage.totalPages > 1}">
	        <ul class="pagination justify-content-center">
	
	            <!-- 上一頁 -->
	            <li class="page-item" th:classappend="${bookPage.first}? 'disabled'">
	                <a class="page-link"
	                   th:href="@{/books(page=${bookPage.number - 1}, keyword=${keyword})}">上一頁</a>
	            </li>
	
	            <!-- 頁碼 -->
	            <li class="page-item"
	                th:each="i : ${#numbers.sequence(0, bookPage.totalPages - 1)}"
	                th:classappend="${i == bookPage.number}? 'active'">
	                <a class="page-link"
	                   th:text="${i + 1}"
	                   th:href="@{/books(page=${i}, keyword=${keyword})}"></a>
	            </li>
	
	            <!-- 下一頁 -->
	            <li class="page-item" th:classappend="${bookPage.last}? 'disabled'">
	                <a class="page-link"
	                   th:href="@{/books(page=${bookPage.number + 1}, keyword=${keyword})}">下一頁</a>
	            </li>
	
	        </ul>
	    </nav>
	</div>
</body>
</html>